// Generated by the ProjectIt Language Generator.
import { PiElement, SelectBox, SelectOption } from "@projectit/core";
import { projectitStyles } from "../../styles/styles";
import { DemoEnvironment } from "../DemoEnvironment";

import { DemoAttributeType } from "../../language/DemoAttributeType";

export class DemoSelectionHelpers {
    public enumSelectForDemoAttributeType(
        elem: PiElement,
        role: string,
        getAction: () => SelectOption,
        setAction: (o: SelectOption) => void
    ) {
        return new SelectBox(
            elem,
            role,
            "<" + "select>",
            () => {
                return DemoAttributeType.values.map(v => ({
                    id: v.asString(),
                    label: v.asString()
                }));
            },
            () => getAction(),
            (option: SelectOption) => {
                setAction(option);
            },
            { style: projectitStyles.function }
        );
    }

    public getReferenceBox(
        element: PiElement,
        role: string,
        placeholder: string,
        metaType: string,
        getAction: () => SelectOption,
        setAction: (o: SelectOption) => void
    ): SelectBox {
        return new SelectBox(
            element,
            role,
            placeholder,
            () => {
                return DemoEnvironment.getInstance()
                    .scoper.getVisibleNames(element, metaType)
                    .map(name => ({
                        id: name,
                        label: name
                    }));
            },
            () => getAction(),
            (option: SelectOption) => setAction(option)
        );
    }
}
