<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><title>Customization of the Validator - ProjectIt - a Projectional Editor for the Web</title><link rel="shortcut icon" href="http://localhost:4000/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs.css"> <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Customization of the Validator | ProjectIt - a Projectional Editor for the Web</title><meta name="generator" content="Jekyll v4.0.1" /><meta property="og:title" content="Customization of the Validator" /><meta property="og:locale" content="en_US" /><meta name="description" content="ProjectIt" /><meta property="og:description" content="ProjectIt" /><link rel="canonical" href="http://localhost:4000/version-0.1.0/pages/third-level/validator-third-level.html" /><meta property="og:url" content="http://localhost:4000/version-0.1.0/pages/third-level/validator-third-level.html" /><meta property="og:site_name" content="ProjectIt - a Projectional Editor for the Web" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Customization of the Validator" /> <script type="application/ld+json"> {"@type":"WebPage","url":"http://localhost:4000/version-0.1.0/pages/third-level/validator-third-level.html","headline":"Customization of the Validator","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/version-0.1.0/images/logo-inverse-colors.png"}},"description":"ProjectIt","@context":"https://schema.org"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"><title>Link</title><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg><div class="page-wrap"><div class="side-bar"><div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"><div class="site-logo"></div></a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button></div><div class="navigation main-nav js-main-nav"><nav role="navigation" aria-label="Main navigation"><ul class="navigation-list"><li class="navigation-list-item"><a href="http://localhost:4000/" class="navigation-list-link"> >&nbsp;ProjectIt - Introduction </a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/intro/projectional-editing.html" class="navigation-list-link">What is Projectional Editing?</a><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/intro/philosophy.html" class="navigation-list-link">ProjectIt Philosophy</a><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/intro/modelunits.html" class="navigation-list-link">Models and Model Units</a><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/intro/three-levels.html" class="navigation-list-link">Three Levels to Customize ProjectIt</a><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/intro/expressions.html" class="navigation-list-link">Support For Expressions</a><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/intro/wish-list.html" class="navigation-list-link">Future Developments</a></ul><li class="navigation-list-item"><a href="http://localhost:4000/version-0.1.0/pages/starting/getting_started_intro.html" class="navigation-list-link"> >&nbsp;Getting Started </a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/starting/installing.html" class="navigation-list-link">Installing and Using ProjectIt</a><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/starting/commandline.html" class="navigation-list-link">Calling The Generator</a><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/starting/code-organisation.html" class="navigation-list-link">Project Structure</a><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/starting/adaptability.html" class="navigation-list-link">Customizability</a></ul><li class="navigation-list-item"><a href="http://localhost:4000/version-0.1.0/pages/second-level/tutorials-intro.html" class="navigation-list-link"> >&nbsp;Tutorials </a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/second-level/langdef-tutorial.html" class="navigation-list-link">Language Structure</a><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/second-level/editdef-tutorial.html" class="navigation-list-link">Editor Definition</a><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/second-level/scopedef-tutorial.html" class="navigation-list-link">Scoper Definition</a><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/second-level/typedef-tutorial.html" class="navigation-list-link">Typer Definition</a><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/second-level/validdef-tutorial.html" class="navigation-list-link">Validator Definition</a></ul><li class="navigation-list-item active"><a href="http://localhost:4000/version-0.1.0/pages/third-level/third-level-intro.html" class="navigation-list-link"> >&nbsp;Third Level Customization </a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/third-level/editor-third-level.html" class="navigation-list-link">Customization of the Editor</a><li class="navigation-list-item active"><a href="http://localhost:4000/version-0.1.0/pages/third-level/validator-third-level.html" class="navigation-list-link active">Customization of the Validator</a><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/third-level/typer-third-level.html" class="navigation-list-link">Customization of the Typer</a><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/third-level/scoper-third-level.html" class="navigation-list-link">Customization of the Scoper</a></ul><li class="navigation-list-item"><a href="http://localhost:4000/version-0.1.0/pages/meta-documentation/meta-documentation-intro.html" class="navigation-list-link"> >&nbsp;Under the Hood </a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/meta-documentation/name-based-references.html" class="navigation-list-link">Name-Based References</a><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/meta-documentation/interfaces/core-interfaces-intro.html" class="navigation-list-link">The ProjectIt Core Interfaces</a><ul class="navigation-list-child-list"></ul><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/meta-documentation/tools-interfaces/tools-interfaces-intro.html" class="navigation-list-link">The Pi-tool Interfaces</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="http://localhost:4000/version-0.1.0/pages/meta-documentation/tools-interfaces/reader-interface.html" class="navigation-list-link">PiReader</a><li class="navigation-list-item "> <a href="http://localhost:4000/version-0.1.0/pages/meta-documentation/tools-interfaces/scoper-interface.html" class="navigation-list-link">PiScoper</a><li class="navigation-list-item "> <a href="http://localhost:4000/version-0.1.0/pages/meta-documentation/tools-interfaces/standardlib-interface.html" class="navigation-list-link">PiStdlib</a><li class="navigation-list-item "> <a href="http://localhost:4000/version-0.1.0/pages/meta-documentation/tools-interfaces/typer-interface.html" class="navigation-list-link">PiTyper</a><li class="navigation-list-item "> <a href="http://localhost:4000/version-0.1.0/pages/meta-documentation/tools-interfaces/validator-interface.html" class="navigation-list-link">PiValidator</a><li class="navigation-list-item "> <a href="http://localhost:4000/version-0.1.0/pages/meta-documentation/tools-interfaces/writer-interface.html" class="navigation-list-link">PiWriter</a><li class="navigation-list-item "> <a href="http://localhost:4000/version-0.1.0/pages/meta-documentation/tools-interfaces/environment-interface.html" class="navigation-list-link">PiEnvironment</a></ul><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/meta-documentation/framework/editor-framework.html" class="navigation-list-link">The Editor Framework</a><ul class="navigation-list-child-list"></ul><li class="navigation-list-item "><a href="http://localhost:4000/version-0.1.0/pages/meta-documentation/code-documentation.html" class="navigation-list-link">Source Code Documentation</a></ul></ul></nav></div><footer class="site-footer"><p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p></footer></div><div class="main-content-wrap js-main-content" tabindex="0"><div class="main-content"><div class="topbar"><div class="page-header js-page-header"><div class="search"><div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search ProjectIt - a Projectional Editor for the Web" aria-label="Search ProjectIt - a Projectional Editor for the Web" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg></div><div class="js-search-results search-results-wrap"></div></div><ul class="list-style-none text-small aux-nav"><li class="d-inline-block my-0"><a class="top-text" href="https://github.com/projectit-org/ProjectIt">ProjectIt on Github</a></ul></div></div><div class="page"><nav class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/version-0.1.0/pages/third-level/third-level-intro.html">Third Level Customization</a><li class="breadcrumb-nav-list-item"><span>Customization of the Validator</span></ol></nav><div id="main-content" class="page-content" role="main"><h1> Third Level Customization of the Validator</h1><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>The validator can be adjusted on level 3 by adding a single Typescript class. This class should implement the worker part of the visitor pattern, adding checks per node of the AST that is visited.</p></div><div class="paragraph"><p>You can add the Typescript class anywhere, providing you let ProjectIt know where the file can be found through the ProjectIt configuration. See</p></div></div></div><div class="sect1"><h2 id="you-own-validation-class"> <a href="#you-own-validation-class" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> You own Validation Class</h2><div class="sectionbody"><div class="ulist"><ul><li><p>Create a Typescript file somewhere, for instance in <code>~/picode/validator</code>. Note, again, to not add it to the <code>~/picode/validator/gen</code> folder, as this will be delete upon regeneration.</p><li><p>Create a class in this file and let this class implement the generated <code>&lt;yourLanguageName&gt;CheckerInterface</code>. Obviously, <code>&lt;yourLanguageName&gt;</code> needs to be replaced by the name of your language.</p><div class="paragraph"><p>This is the interface to be implemented for the language called <code>Entity</code>.</p></div></ul></div><div class="listingblock"><div class="content"><pre class="highlight"><code class="language-javascript" data-lang="javascript">    export interface EntityCheckerInterface extends EntityDefaultWorker {
        errorList: PiError[];
    }</code></pre></div></div><div class="ulist"><ul><li><p>Let your class extend the generated default AST worker part of the visitor pattern, which is called <code>&lt;yourLanguageName&gt;DefaultWorker</code>.</p><li><p>Now implement any of the methods of the default worker put in your validation the corresponding model element. This method will override the (empty) default implementation. The validation error should be pushed onto the <code>errorList</code> attribute. Therefore, each error must implement the <a href="../meta-documentation/tools-interfaces/validator-interface.html#PiError">PiError</a> interface.</p></ul></div><div class="paragraph"><p>The result of the above should look something like this:</p></div><div class="listingblock"><div class="content"><pre class="highlight"><code class="language-javascript" data-lang="javascript">export class CustomValidation extends EntityDefaultWorker implements EntityCheckerInterface {
    errorList: PiError[] = [];
    public execBeforeEntityFunction(modelelement: EntityFunction): boolean {
        if (modelelement.name == "determine") {
            this.errorList.push(
                new PiError(
                    `SOMETHING IS TERRIBLY WRONG WITH THIS ELEMENT`,
                    modelelement,
                    modelelement.name,
                    PiErrorSeverity.Error
                )
            );
            return true;
        }
        return false;
    }
}</code></pre></div></div><div class="paragraph"><p>In this example only nodes of type <code>EntityFunction</code> are checked. If the name of the node equals <code>determine</code> than an error is pushed on the <code>errorList</code>.</p></div><div class="paragraph"><p>If you want the walker to stop when an erroneous node is found you should return <code>true</code>, else return <code>false</code>.</p></div></div></div><div class="sect1"><h2 id="the-configuration"> <a href="#the-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> The Configuration</h2><div class="sectionbody"><div class="paragraph"><p>You should let ProjectIt know where it can find your customized validation class by adding an instance of your class to the <code>customValidations</code> array in the file <code>ProjectitConfiguration.ts</code>. You will find this file in <code>~/picode/projectit</code>. It is generated once, and wil not be overwritten on regeneration.</p></div><div class="paragraph"><p>Using the above example class, the configuration should look like this:</p></div><div class="listingblock"><div class="content"><pre class="highlight"><code class="language-javascript" data-lang="javascript">class ProjectitConfiguration {
    customProjection: PiProjection[] = [new CustomEntityProjection("manual")];
    customActions: PiActions[] = [new CustomEntityActions()];
    customValidations: EntityCheckerInterface[] = [new CustomValidation()];
}</code></pre></div></div></div></div><hr><footer role="contentinfo"><p class="text-small text-grey-dk-000 mb-0">Copyright &copy; 2020-2021 Jos Warmer. Distributed by an <a class="text-small text-grey-dk-200 mb-0" href="https://github.com/projectit-org/ProjectIt/blob/development/LICENSE" target="_blank">MIT license.</a> This project is supported by <a class="text-small text-grey-dk-200 mb-0" href="https://openmodeling.nl" target="_blank">Openmodeling.nl.</a></p></footer></div></div></div></div>
