<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><title>The Editor Framework - ProjectIt - a Projectional Editor for the Web</title><link rel="shortcut icon" href="https://www.projectit.org/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="https://www.projectit.org/assets/css/just-the-docs.css"> <script type="text/javascript" src="https://www.projectit.org/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="https://www.projectit.org/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>The Editor Framework | ProjectIt - a Projectional Editor for the Web</title><meta name="generator" content="Jekyll v4.0.1" /><meta property="og:title" content="The Editor Framework" /><meta property="og:locale" content="en_US" /><meta name="description" content="ProjectIt" /><meta property="og:description" content="ProjectIt" /><link rel="canonical" href="https://www.projectit.org/version-0.1.0/pages/meta-documentation/framework/editor-framework.html" /><meta property="og:url" content="https://www.projectit.org/version-0.1.0/pages/meta-documentation/framework/editor-framework.html" /><meta property="og:site_name" content="ProjectIt - a Projectional Editor for the Web" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="The Editor Framework" /> <script type="application/ld+json"> {"@type":"WebPage","headline":"The Editor Framework","url":"https://www.projectit.org/version-0.1.0/pages/meta-documentation/framework/editor-framework.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://www.projectit.org/version-0.1.0/images/logo-inverse-colors.png"}},"description":"ProjectIt","@context":"https://schema.org"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"><title>Link</title><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg><div class="page-wrap"><div class="side-bar"><div class="site-header"> <a href="https://www.projectit.org/" class="site-title lh-tight"><div class="site-logo"></div></a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button></div><div class="navigation main-nav js-main-nav"><nav role="navigation" aria-label="Main navigation"><ul class="navigation-list"><li class="navigation-list-item"><a href="https://www.projectit.org/" class="navigation-list-link"> >&nbsp;ProjectIt - Introduction </a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/intro/projectional-editing.html" class="navigation-list-link">What is Projectional Editing?</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/intro/philosophy.html" class="navigation-list-link">ProjectIt Philosophy</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/intro/modelunits.html" class="navigation-list-link">Models and Model Units</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/intro/three-levels.html" class="navigation-list-link">Three Levels to Customize ProjectIt</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/intro/expressions.html" class="navigation-list-link">Support For Expressions</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/intro/wish-list.html" class="navigation-list-link">Future Developments</a></ul><li class="navigation-list-item"><a href="https://www.projectit.org/version-0.1.0/pages/starting/getting_started_intro.html" class="navigation-list-link"> >&nbsp;Getting Started </a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/starting/installing.html" class="navigation-list-link">Installing and Using ProjectIt</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/starting/commandline.html" class="navigation-list-link">Calling The Generator</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/starting/code-organisation.html" class="navigation-list-link">Project Structure</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/starting/adaptability.html" class="navigation-list-link">Customizability</a></ul><li class="navigation-list-item"><a href="https://www.projectit.org/version-0.1.0/pages/second-level/tutorials-intro.html" class="navigation-list-link"> >&nbsp;Tutorials </a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/second-level/langdef-tutorial.html" class="navigation-list-link">Language Structure</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/second-level/editdef-tutorial.html" class="navigation-list-link">Editor Definition</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/second-level/scopedef-tutorial.html" class="navigation-list-link">Scoper Definition</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/second-level/typedef-tutorial.html" class="navigation-list-link">Typer Definition</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/second-level/validdef-tutorial.html" class="navigation-list-link">Validator Definition</a></ul><li class="navigation-list-item"><a href="https://www.projectit.org/version-0.1.0/pages/third-level/third-level-intro.html" class="navigation-list-link"> >&nbsp;Third Level Customization </a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/third-level/editor-third-level.html" class="navigation-list-link">Customization of the Editor</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/third-level/validator-third-level.html" class="navigation-list-link">Customization of the Validator</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/third-level/typer-third-level.html" class="navigation-list-link">Customization of the Typer</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/third-level/scoper-third-level.html" class="navigation-list-link">Customization of the Scoper</a></ul><li class="navigation-list-item active"><a href="https://www.projectit.org/version-0.1.0/pages/meta-documentation/meta-documentation-intro.html" class="navigation-list-link"> >&nbsp;Under the Hood </a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/meta-documentation/name-based-references.html" class="navigation-list-link">Name-Based References</a><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/meta-documentation/interfaces/core-interfaces-intro.html" class="navigation-list-link">The ProjectIt Core Interfaces</a><ul class="navigation-list-child-list"></ul><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/meta-documentation/tools-interfaces/tools-interfaces-intro.html" class="navigation-list-link">The Pi-tool Interfaces</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="https://www.projectit.org/version-0.1.0/pages/meta-documentation/tools-interfaces/reader-interface.html" class="navigation-list-link">PiReader</a><li class="navigation-list-item "> <a href="https://www.projectit.org/version-0.1.0/pages/meta-documentation/tools-interfaces/scoper-interface.html" class="navigation-list-link">PiScoper</a><li class="navigation-list-item "> <a href="https://www.projectit.org/version-0.1.0/pages/meta-documentation/tools-interfaces/standardlib-interface.html" class="navigation-list-link">PiStdlib</a><li class="navigation-list-item "> <a href="https://www.projectit.org/version-0.1.0/pages/meta-documentation/tools-interfaces/typer-interface.html" class="navigation-list-link">PiTyper</a><li class="navigation-list-item "> <a href="https://www.projectit.org/version-0.1.0/pages/meta-documentation/tools-interfaces/validator-interface.html" class="navigation-list-link">PiValidator</a><li class="navigation-list-item "> <a href="https://www.projectit.org/version-0.1.0/pages/meta-documentation/tools-interfaces/writer-interface.html" class="navigation-list-link">PiWriter</a><li class="navigation-list-item "> <a href="https://www.projectit.org/version-0.1.0/pages/meta-documentation/tools-interfaces/environment-interface.html" class="navigation-list-link">PiEnvironment</a></ul><li class="navigation-list-item active"><a href="https://www.projectit.org/version-0.1.0/pages/meta-documentation/framework/editor-framework.html" class="navigation-list-link active">The Editor Framework</a><ul class="navigation-list-child-list"></ul><li class="navigation-list-item "><a href="https://www.projectit.org/version-0.1.0/pages/meta-documentation/code-documentation.html" class="navigation-list-link">Source Code Documentation</a></ul></ul></nav></div><footer class="site-footer"><p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p></footer></div><div class="main-content-wrap js-main-content" tabindex="0"><div class="main-content"><div class="topbar"><div class="page-header js-page-header"><div class="search"><div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search ProjectIt - a Projectional Editor for the Web" aria-label="Search ProjectIt - a Projectional Editor for the Web" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg></div><div class="js-search-results search-results-wrap"></div></div><ul class="list-style-none text-small aux-nav"><li class="d-inline-block my-0"><a class="top-text" href="https://github.com/projectit-org/ProjectIt">ProjectIt on Github</a></ul></div></div><div class="page"><nav class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="https://www.projectit.org/version-0.1.0/pages/meta-documentation/meta-documentation-intro.html">Under the Hood</a><li class="breadcrumb-nav-list-item"><span>The Editor Framework</span></ol></nav><div id="main-content" class="page-content" role="main"><h1> The Projectional Editor Framework</h1><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>The Projectional Editor Framework is written in TypeScript and based on React. This page provides an overview of the Framework. If you want to get deeper into this, see the tutorial <a href="../../third-level/framework-tutorial.html">How to Use the ProjectIt Framework</a>.</p></div></div></div><div class="sect1"><h2 id="projection-layout-based-on-boxes"> <a href="#projection-layout-based-on-boxes" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Projection Layout Based on Boxes</h2><div class="sectionbody"><div class="paragraph"><p>The layout of every visible element in the editor is based on <em>boxes</em>. A box is a rectangular area in the editor. A box can contain any number of child boxes. Every AST node is projected in a box.</p></div><div class="paragraph"><p>A small example to start with:</p></div><div class="exampleblock"><div class="content"><div id="img-package-json" class="imageblock"><div class="content"> <img src="/version-0.1.0/images/mapping-example-stringliteral.svg" alt="mapping-example-stringliteral"></div><div class="title">Figure 1. Mapping a StringLiteral</div></div></div></div><div class="paragraph"><p>The figure shows the projection of the concept <code>StringLiteral</code>. This is mapped to a horizontal list of a quote ("), an editable text with the value of the StringLiteral, and a closing quote ("). Note that the quotes are not part of the AST. They are part of the concrete syntax used in this projection of the AST.</p></div><div class="paragraph"><p>In TypeScript this projection might look something like:</p></div><div class="listingblock"><div class="content"><pre class="highlight"><code class="language-javascript" data-lang="javascript">new HorizontalListBox( [
    new LabelBox("\""),
    new TextBox(stringLiteral.value),
    new LabelBox("\"")
]);</code></pre></div></div><div class="paragraph"><p>There are a large number of different types of boxes. See <a href="different-boxes.html">Boxes</a> for an overview.</p></div><div class="paragraph"><p>Every projection must implement the <a href="../generated-code/interfaces.html"><em>PiProjection</em></a> interface.</p></div></div></div><div class="sect1"><h2 id="coupling-behavior-to-boxes"> <a href="#coupling-behavior-to-boxes" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Coupling Behavior to Boxes</h2><div class="sectionbody"><div class="paragraph"><p>User actions on boxes need to be translated into interactions with the projected AST. To know which part of the projection represents the AST node, we give each <code>Box</code> in the projection a <em>role</em>, which is unique within its parent box. This way we can identify every box by its model element plus its role.</p></div><div class="paragraph"><p>In the following figure the roles are shown above the boxes in green.</p></div><div class="exampleblock"><div class="content"><div id="img-string-literal" class="imageblock"><div class="content"> <img src="/version-0.1.0/images/mapping-example-stringliteral-with-roles.svg" alt="mapping example stringliteral with roles"></div><div class="title">Figure 2. Mapping a StringLiteral with Roles</div></div></div></div><div class="paragraph"><p>We can now show the full typescript code for this projection. Given that <code>literal</code> is the <code>StringLiteral</code> object:</p></div><div class="listingblock"><div class="content"><pre class="highlight"><code class="language-javascript" data-lang="javascript">new HorizontalListBox(literal, "string-literal", [      <i class="conum" data-value="1"></i><b>(1)</b>
    new LabelBox(literal, "start-quote", '"'),          <i class="conum" data-value="2"></i><b>(2)</b>
    new TextBox(                                        <i class="conum" data-value="3"></i><b>(3)</b>
        literal,
        "string-value",
        () =&gt; literal.value,
        (v: string) =&gt; (literal.value = v)
    ),
    new LabelBox(literal, "end-quote", '"')             <i class="conum" data-value="4"></i><b>(4)</b>
])</code></pre></div></div><div class="colist arabic"><div class="table-wrapper"><table><tr><td><i class="conum" data-value="1"></i><b>1</b><td>The overall horizontal list box to group everything<tr><td><i class="conum" data-value="2"></i><b>2</b><td>The first label box for the start quote<tr><td><i class="conum" data-value="3"></i><b>3</b><td>The text box for the value of the string literal<tr><td><i class="conum" data-value="4"></i><b>4</b><td>The second label box for the end quote</table></div></div><div class="paragraph"><p>The behavior coupled to a <em>Box</em> is defined by an <code>action</code>. To identify which action should be executed, each behavior is specified by:</p></div><div class="ulist"><ul><li><p>one or more <em>box roles</em>, specifying that the behavior is only active in boxes with that specific role,</p><li><p>a <em>trigger</em>, describing the key(s) that will trigger the behavior, and</p><li><p>an <em>action</em>, which is a typescript/javascript function the will be executed when the behavior is being triggered.</p></ul></div><div class="paragraph"><p>Actions are further described in <a href="defining_actions.html">Actions</a>.</p></div></div></div><hr><footer role="contentinfo"><p class="text-small text-grey-dk-000 mb-0">Copyright &copy; 2020-2021 Jos Warmer. Distributed by an <a class="text-small text-grey-dk-200 mb-0" href="https://github.com/projectit-org/ProjectIt/blob/development/LICENSE" target="_blank">MIT license.</a> This project is supported by <a class="text-small text-grey-dk-200 mb-0" href="https://openmodeling.nl" target="_blank">Openmodeling.nl.</a></p></footer></div></div></div></div>
